@model Pastebook.Models.FriendListViewModel

@{
    ViewBag.Title = "Friends";
}

<div id="friend-friend-list-container" class="container">
    <div id="friend-backToTimeline">
        @Html.ActionLink("Back To Newsfeed", "Index", "Pastebook")
    </div>

    <div>
        <h3>Your Friends (@Model.ListOfFriendsWithDetails.Where(friendRequest=> friendRequest.Friend.REQUEST == "Y").Count())</h3>
    </div>
<div class="row" id="friend-row">
    @foreach (var friendDetails in Model.ListOfFriendsWithDetails)
    {
        if (friendDetails.Friend.REQUEST == "Y")
        {
        <div class="friend-friendlist-item col-md-2">
            <div class="friendlist-item-header">
                @if (friendDetails.FriendDetails.PROFILE_PIC == null)
                {
                    <img src="@Url.Content("~/Content/Images/pastebook-default.png")" id="friend-friend-prof-pic" class="img-circle" alt=@friendDetails.FriendDetails.FIRST_NAME @friendDetails.FriendDetails.LAST_NAME>
                }

                else
                {
                    var base64 = Convert.ToBase64String(friendDetails.FriendDetails.PROFILE_PIC);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                    <img src=@imgSrc id="friend-friend-prof-pic" class="img-circle" alt=@friendDetails.FriendDetails.FIRST_NAME @friendDetails.FriendDetails.LAST_NAME>
                }
                <div id="friend-name" class="text-center">
                    @Html.ActionLink(friendDetails.FriendDetails.FIRST_NAME + " " + friendDetails.FriendDetails.LAST_NAME, "UserProfile", "Pastebook", new { username = friendDetails.FriendDetails.USER_NAME }, null)
                </div>
            </div>
        </div>
        }
    }
</div>
</div>