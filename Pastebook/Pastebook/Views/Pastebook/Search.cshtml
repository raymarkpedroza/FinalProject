@model Pastebook.Models.ResultsViewModel

@{
    ViewBag.Title = "Search Result for "+ Model.searchQuery;
}

<div id="friend-friend-list-container" class="container">
    <div id="friend-backToTimeline">
        @Html.ActionLink("Back To Timeline", "Home", "Pastebook")
    </div>
    <div class="row" id="friend-row">
        @if (Model.searchResults.Count() > 0)
        {
            <div>
                <span id="results">Displaying results for "@Model.searchQuery" (@Model.searchResults.Count found)</span>
            </div>

            foreach (var searchResults in Model.searchResults)
            {
                <div class="friend-friendlist-item col-md-2">
                    <div class="friendlist-item-header">
                        @if (searchResults.PROFILE_PIC == null)
                        {
                            <img src="@Url.Content("~/Content/Images/pastebook-default.png")" id="friend-friend-prof-pic" class="img-circle" alt=@searchResults.FIRST_NAME @searchResults.LAST_NAME>
                        }

                        else
                        {
                            var base64 = Convert.ToBase64String(searchResults.PROFILE_PIC);
                            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                            <img src=@imgSrc id="friend-friend-prof-pic" class="img-circle" alt=@searchResults.FIRST_NAME @searchResults.LAST_NAME>
                        }
                        <div id="friend-name" class="text-center">
                            @Html.ActionLink(searchResults.FIRST_NAME + " " + searchResults.LAST_NAME, "UserProfile", "Profile", new { username = searchResults.USER_NAME }, null)
                        </div>
                    </div>
                </div>
            }
        }

        else
        {
            <div>
                <span id="noResults">No results found for @Model.searchQuery!</span>
            </div>
        }

    </div>
</div>
