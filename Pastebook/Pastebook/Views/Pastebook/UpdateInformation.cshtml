@model Pastebook.Models.EditProfileViewModel

@{
    ViewBag.Title = "Update User Information";
}

@using (Html.BeginForm("UpdateInformation", "Profile", FormMethod.Post))
{
<div class="form-horizontal container">
    <div class="col-md-offset-2 col-md-8" id="edit-profile">
    <h4>Update Information</h4>
    <hr />
    <h4>Fill up the required fields(*)</h4>

    <div id="edit-basic-info" class="container">

            <div class="form-group">
                <span class="col-md-4"><span class="glyphicon glyphicon-user"></span> Username*</span>
                <div class="col-md-8">
                    @Html.EditorFor(model => model.User.USER_NAME, new { htmlAttributes = new { @class = "text-line", placeholder = "username" } })
                    @Html.ValidationMessageFor(model => model.User.USER_NAME, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <span class="col-md-4"><span class="glyphicon glyphicon-user"></span> Firstname*</span>
                <div class="col-md-8">
                    @Html.EditorFor(model => model.User.FIRST_NAME, new { htmlAttributes = new { @class = "text-line", placeholder = "first name" } })
                    @Html.ValidationMessageFor(model => model.User.FIRST_NAME, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                 <span class="col-md-4"><span class="glyphicon glyphicon-user"></span> Lastname*</span>

                <div class="col-md-8">
                    @Html.EditorFor(model => model.User.LAST_NAME, new { htmlAttributes = new { @class = "text-line", placeholder = "last name" } })
                    @Html.ValidationMessageFor(model => model.User.LAST_NAME, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <span class="col-md-4"><span class="glyphicon glyphicon-gift"></span> Birthday*</span>

                    <div class="col-md-8">
                        @Html.EditorFor(model => model.User.BIRTHDAY, new { htmlAttributes = new { @class = "text-line", id = "dtpBirthday", @Value=Model.User.BIRTHDAY.ToString("MM/dd/yyyy"), @readonly = true } })
                        @Html.ValidationMessageFor(model => model.User.BIRTHDAY, "", new { @class = "text-danger" })
                    </div>
            </div>

            @if (Model.ListOfCountryModel != null)
            {
                List<SelectListItem> listOfCountries = new List<SelectListItem>();

                foreach (var country in Model.ListOfCountryModel)
                {
                    listOfCountries.Add(new SelectListItem
                    {
                        Text = country.COUNTRY,
                        Value = country.ID.ToString()
                    });
                }

                listOfCountries.Where(x => x.Value == Model.User.COUNTRY_ID.ToString()).SingleOrDefault().Selected = true;

                <div class="form-group">
                    <span class="col-md-4">
                    <span class="glyphicon glyphicon-home"></span> Country*</span>

                    <div class="col-md-8">
                        @Html.DropDownListFor(model => model.User.COUNTRY_ID, listOfCountries, "select country", new { @class = "text-line" })
                        @Html.ValidationMessageFor(model => model.User.COUNTRY_ID, "", new { @class = "text-danger" })
                    </div>
                </div>
            }

            @{
                List<SelectListItem> listOfGenders = new List<SelectListItem>();

                listOfGenders.Add(new SelectListItem { Text = "Male", Value = "M" });
                listOfGenders.Add(new SelectListItem { Text = "Female", Value = "F" });
                listOfGenders.Add(new SelectListItem { Text = "Unspecified", Value = "U" });

                listOfGenders.Where(x => x.Value == Model.User.GENDER.ToString()).SingleOrDefault().Selected = true;
            }

            <div class="form-group">
                <span class="col-md-4"><span class="fa fa-venus-mars"></span> Gender</span>
                <div class="col-md-8">
                    @Html.DropDownListFor(model => model.User.GENDER, listOfGenders, "select gender", new { @class = "text-line" })
                    @Html.ValidationMessageFor(model => model.User.GENDER, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @*@Html.LabelFor(model => model.User.MOBILE_NO, htmlAttributes: new { @class = "control-label col-md-4" })*@
                <span class="col-md-4"><span class="glyphicon glyphicon-phone"></span> Mobile Number</span>

                <div class="col-md-8">
                    @Html.EditorFor(model => model.User.MOBILE_NO, new { htmlAttributes = new { @class = "text-line", placeholder = "mobile number" } })
                    @Html.ValidationMessageFor(model => model.User.MOBILE_NO, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="pull-right ">
                    <input type="submit" value="Update Account" class="btn btn-default" />
                    <input type="button" value="Cancel" class="btn btn-default" id="btnCancel" />
                </div>
            </div>
        </div>
    </div>
</div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(document).ready(function () {
            $(function () {
                $("#dtpBirthday").datepicker({
                    dateFormat: 'mm/dd/yy',
                    minDate: new Date('01/01/1600'),
                    maxDate: '0',
                    changeMonth: true,
                    changeYear: true,
                });
            });

            $("#btnCancel").click(function (event) {
                event.preventDefault();
                var url = '@Url.Action("Index", "Home")';
                window.location.href = url;
            });
        });
    </script>
}
