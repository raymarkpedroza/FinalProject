@model IEnumerable<Pastebook.Models.FriendRequestViewModel>


<span class="glyphicon glyphicon-user icon" id="friendRequests" data-toggle="dropdown">
</span>
@if (Model.Where(x => x.FriendRequest.USER_ID != (int)Session["UserId"]).Where(x => x.FriendRequest.REQUEST != "Y").Count() > 0)
{
    <span class="badge badge-notify" id="friend-request-notification" data-toggle="dropdown"> @Model.Where(x => x.FriendRequest.USER_ID != (int)Session["UserId"]).Where(x => x.FriendRequest.REQUEST != "Y").Count() </span>
}

<div class="dropdown-menu" aria-labelledby="friendRequests">

    @if (Model.Where(x => x.FriendRequest.USER_ID != (int)Session["UserId"]).Where(x => x.FriendRequest.REQUEST != "Y").Count() == 0)
    {
            <div class="friend-request-listitem">No friend request.</div>
    }
    else
    {
        foreach (var friendRequest in Model)
        {
            if (friendRequest.FriendRequest.USER_ID != (int)Session["UserId"] && friendRequest.FriendRequest.REQUEST != "Y")
            {
                if (friendRequest.Requester.PROFILE_PIC == null)
                {
                    <img src="~/Content/Images/pastebook-default.png" id="requester-prof-pic" alt=@friendRequest.Requester.FIRST_NAME @friendRequest.Requester.LAST_NAME>
                }

                else
                {
                    var base64 = Convert.ToBase64String(friendRequest.Requester.PROFILE_PIC);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                    <img src=@imgSrc id="requester-prof-pic" class="img-circle" alt=@friendRequest.Requester.FIRST_NAME @friendRequest.Requester.LAST_NAME>
                }
            <div class="friend-request-listitem">@Html.ActionLink(friendRequest.Requester.FIRST_NAME + " " + friendRequest.Requester.LAST_NAME, "Index", "Pastebook", new { username = friendRequest.Requester.USER_NAME }, null)  has requested to add you.
            <div>
                <button type="button" class="btnAcceptRequest btn-primary" value=@friendRequest.FriendRequest.ID>Accept</button> 
                <button type="button" class="btnIgnoreRequest  btn-warning" value=@friendRequest.FriendRequest.ID>Ignore</button>
            </div>
            </div>
            }
        }
    }
</div>





