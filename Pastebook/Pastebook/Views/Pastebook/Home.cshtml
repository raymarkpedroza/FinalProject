@model PastebookEF.USER

@{
    ViewBag.Title = "Home";
}

<div class="container" id="newsfeed">
    <div class="row">
        <div class="col-md-4" id="user-profile">
            @*<div id="user-profile-header" class="text-center">
                <span class="welcome-header">Welcome @Model.USER_NAME!</span>
            </div>*@
            @if (Model.PROFILE_PIC == null)
            {
                <img src="@Url.Content("~/Content/Images/pastebook-default.png")" id="prof-pic" class="col-md-6" alt=@Model.FIRST_NAME @Model.LAST_NAME>
            }

            else
            {
                var base64 = Convert.ToBase64String(Model.PROFILE_PIC);
                var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                <img src=@imgSrc id="prof-pic" alt=@Model.FIRST_NAME @Model.LAST_NAME class="col-md-6">
            }

            <div class="col-md-6">
                <div id="user-fullname">
                    @Html.ActionLink("[PROFILE]", "UserProfile", "Profile", new { username = Session["Username"].ToString() }, null)
                </div>

                <div>
                    @Html.ActionLink("[FRIENDS]", "Friends", "Friend")
                </div>
                
                <div>
                    @Html.ActionLink("[NOTIFICATIONS]", "Notification", "Notification")
                </div>
            </div>
        </div>


        <div class="col-md-8">

            <div id="writePost">
                @*<div id="writePost-header">
                    <div class="text-right">
                        <h3 class="write-post-text"><span class="glyphicon glyphicon-pencil"></span><span>Status</span></h3>
                    </div>
                </div>*@

                <textarea rows="5" cols="70" id="textAreaPost" placeholder="What's on your mind?" class="col-md-12"></textarea>
                    <div class="clearfix"><button type="button" value=@Model.ID class="btn pull-right" id="btnPost"/>Post</div>
            </div>
            <div id="newsfeedPost">
                @{Html.RenderAction("GetNewsfeedPosts", "Post", new { id = Model.ID });}
            </div>

            <div id="friend-list" class="container">
                <div>
                    <a id="backToTimeline">Back To Timeline</a>
                </div>
                @{Html.RenderAction("GetFriendList", "Friend", new { id = Model.ID });}
            </div>

        </div>
    </div>
</div>

@section scripts{
    
    <script>
        var createPostURL = '@Url.Action("CreatePost", "Post")'
        var addLikeURL = '@Url.Action("AddLike", "Like")'
        var addCommentURL = '@Url.Action("AddComment", "Comment")'
        var getNewsfeedPostsURL = '@Url.Action("GetNewsfeedPosts", "Post", new { id = Model.ID })'
        var getFriendRequestsURL = '@Url.Action("GetFriendRequests", "Friend")';
        var acceptFriendURL = '@Url.Action("AcceptFriend", "Friend")'
        var unlikeURL = '@Url.Action("Unlike", "Like")';
        var searchURL = '@Url.Action("Search", "Pastebook")';
        var errorURL = '@Url.Action("ErrorPage","Error")';
        var checkPostValid = '@Url.Action("CheckIfPostValid", "Post")';
        var checkCommentValid = '@Url.Action("CheckIfCommentIsValid", "Comment")';
    </script>

    <script src="~/Scripts/PastebookScripts/newsfeedScript.js"> </script>
}

